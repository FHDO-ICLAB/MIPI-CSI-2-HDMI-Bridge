`timescale 1ns/1ns

`define IVERILOG 1

module out_tb();
//simulated 125MHz clk_dvi_sim is normally generated by PLL
    reg clk_dvi_sim = 0;
    reg rst_n_sim = 0;
    reg RGB_in_valid;
    reg [23:0] RGB_data;
    wire clk_pix;
    wire data_request;

localparam RED = 8'h1F;
localparam GREEN = 8'h4F;
localparam BLUE = 8'h22;

    video_output_ctrl dut(
        .clk_ref(clk_dvi_sim),
        .RST_N(rst_n_sim),
        .RGB_data_in(RGB_data),
        .RGB_in_valid(RGB_in_valid),
        .clk_pix_out(clk_pix),
        .pixel_request(data_request),
        .TMDS_clk(),
        .TMDS_data()
    );
always begin
    #4 clk_dvi_sim <= ~clk_dvi_sim;
end

initial begin
    $dumpfile("out_tb.vcd");
    $dumpvars(0, out_tb);
end

initial begin
    RGB_data = {RED, GREEN, BLUE};
    #40 rst_n_sim = 1;
    #40
    RGB_in_valid = 1;
    #40000
    $finish;
end
endmodule